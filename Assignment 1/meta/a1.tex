\documentclass[10pt]{article}
\usepackage{alltt}
\usepackage{color}
\usepackage{hyperref}
\usepackage{url}
\addtolength{\oddsidemargin}{-.875in}
	\addtolength{\evensidemargin}{-.875in}
	\addtolength{\textwidth}{1.75in}

	\addtolength{\topmargin}{-.875in}
	\addtolength{\textheight}{1.75in}
\renewcommand{\baselinestretch}{0.97}
\title{Assignment 1}

\date{Due date: January -, 2019, 11:55pm IST}

\begin{document}

\maketitle
\paragraph*{General Instructions}


\begin{itemize}

\item[1.]You will submit 2 files: Fname1Lname1-Fname2Lname2.sql and Fname1Lname1-Fname2Lname2.pdf, corresponding to the dataset and a timings report, respectively.

\item[2.]The .sql files are run automatically using the psql command using the \textbackslash i option, so please ensure that there are no syntax errors in the file. {\it If we are unable to run your file, you get an automatic reduction to 0 marks.}


To understand how to run many queries at once from text file, a dummy query file example.sql is available in 
\url{www.cse.iitd.ac.in/~cs5090257/example.sql}. To run example.sql in postgres, type the following command in the terminal:

sudo -u postgres psql dbname

and then type 

\textbackslash i /address/to/example.sql

This command will run all the queries listed in example.sql at once.  

\item[3.] The format of the file should be as follows. You can have a preamble where you may create views if you like (please note that no procedures are allowed (this has to be pure sql), and correspondingly have a cleanup section where these views are removed. One line should identify the query number (note the two hyphens before and after the query number), followed by the actual, syntactically correct SQL
query. Leave a blank line after each query. 

- -PREAMBLE- -

OPTIONAL DEFINITIONS

- -1- -

SQL QUERY

- -2- -

SQL QUERY

- -3- -

SQL QUERY

- -CLEANUP- -

CLEANUP EVERYTHING YOU CREATED HERE

\item[4.] Many of the queries below require an 'ORDER BY' clause. If you made an error in this clause, your answer will be evaluated as incorrect and zero marks will be awarded. 

\item[5.] Errors with respect to equality and inequality conditions will also be evaluated as incorrect and zero marks will be awarded. 

\item[6.] Assume set semantics, unless stated otherwise.

\item[7.] No changes are allowed in the i) data, ii) attribute names, iii) table names

\item[8.] The .pdf file should contain a bar graph corresponding to the dataset. The graph should report the timings for each query of the dataset (X-axis legend is the query number, Y-axis legend is the time taken).

\item[9.] The submission will be done on Moodle. Details regarding submission and auto evaluation will be updated on piazza.
\end{itemize}
\section{Dataset}

\subsection{Instructions}

\begin{itemize}

\item[1.] In this assignment you will analyze publication data i.e. DBLP, the reference citation website created and maintained by Michael Ley. The analysis has to  be done in postgres. We are providing you cleaned up data and you can download it from  \url{www.cse.iitd.ac.in/~mcs172071/dataset.zip}. You can get more information about the DBLP from \url{http://dblp.uni-trier.de/xml/docu/dblpxml.pdf}. The zip file contains a tab seperated file for each table described below.(Note the order of values in file is same as attributes of table given in next bullet point). You can load the table into database from tsv file using the command - 

copy Author from '/path/to/file/Author.tsv' DELIMITER E'\textbackslash t';

\item[2.] The database will include following five tables and you should use only these tables while writing solution of the queries. You can create temporary tables while handling any SQL query but you should include SQL queries for creating and deleting these temporary tables. Note - you don't have to define these tables in the submission file, these will already be present will evaluation.

\begin{enumerate}
\item Paper\\
	\textbf{Attributes :}  a) PaperId: Int, b) Title: text, c) year: Int, d) VenueId: Int
\item Author\\
	\textbf{Attributes :} a) AuthorId: Int, b) name: text
	
\item PaperByAuthors\\
	\textbf{Attributes :} a) AuthorId: Int, b) PaperId: Int
	
\item Citation\\
	\textbf{Attributes :} a) Paper1Id: Int, b) Paper2Id: Int\\
\emph{Note :} Paper2Id is paperId of the cited paper and it is cited by Paper1Id, i.e. Paper1Id cites Paper2Id.

\item Venue\\
	\textbf{Attributes :} a) VenueId: Int, b) name: text, c) type: text\\
\emph{Note:} Here 'name' is acronym of Venue and 'type' is the type of Venue like 'journals' etc. 
\end{enumerate}

\end{itemize}

\subsection{Queries}

\begin{enumerate}
\item
[1.] For each type of venue, count the total number of publication presented at that type of venue. Your query should return a set of (publication-type, count) pairs. For example: (journals, 30000), ... 
\item
[2.] What is the average number of authors per paper? Output column: the aggregate value.
\item
[3.] List the titles of all entities with more than 20 authors order by alphabetically. 
\item
[4.] List the names of all authors who never published as a single author order by alphabetically.
\item
[5.] Find the top 20 authors with the largest number of publications order by first rank and on tie, order by alphabetically.
\item
[6.] List the names of all authors who published as a single author more than 100 times order by alphabetically.
\item
[7.] List the names of authors who have never published a paper in a journal order by alphabetically.
\item
[8.] List the names of authors who have \textbf{only} journal publications order by alphabetically.
\item
[9.] List the names of the authors who have published at least two papers in 2012 \textbf{and} at least three papers in 2013 order by alphabetically.
\item
[10.] Find the top 20 authors with the largest number of publications in 'corr' journal order by rank.
\item
[11.] Name the authors that have four papers or more in 'amc' journal order by alphabetically.
\item
[12.] Two major journals are 'ieicet' and 'tcs' . Find all authors who published at least 10 'ieicet' papers but never published a 'tcs' paper order by alphabetically.
\item
[13.] Compute the total number of publications per year during 2004-2013. Output Column: (Year, No. of Publication).
\item
[14.] How many (distinct) authors have papers with “query optimization” in the title (case insensitive) ? Output column: count. 
\item
[15.] Write an SQL query that lists the titles of the most cited papers order by decreasing number of citation (break ties using alphabetic order).
\item
[16.] Write an SQL query that  list the titles of all publications that have been cited more than 10 times order by alphabetically.  
\item
[17.] Write an SQL query that list the titles of all publications that are cited more than they cite by a margin of at least 10 order by alphabetically. 
\item
[18.] Write an SQL query that list the titles of papers that have never been cited order by alphabetically.
\item
[19.] Write an SQL query that list the names of all authors who have published papers citing other papers by themselves order by alphabetically. 
\item
[20.] Who are the authors who published in any 'corr' journal between 2009 and 2013 but not in 'ieicet' 2009 journal? Output column: author.name order by alphabetically.
\item 
[21.] What is (are) the journal(s) that has (have) a strictly increasing number of papers every year from 2009 to 2013? Output column: journal.name order by alphabetically. You cannot list the years from 2009 to 2013 individually in the query. You can only use 2009 and 2013 as constants, but not anything in between. (Hint: You may create a temporary table, but make sure to drop it after the query.)
\item 
[22.] What is the journal/year (e.g., corr 2001) which had the largest number of papers? Output columns: journal.name, journal.year.

\end{enumerate}
\end{document}


